"use strict";(()=>{var Ae=Object.defineProperty,Re=Object.defineProperties;var Te=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var H=Math.pow,ie=(e,a,t)=>a in e?Ae(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,P=(e,a)=>{for(var t in a||(a={}))be.call(a,t)&&ie(e,t,a[t]);if(oe)for(var t of oe(a))ke.call(a,t)&&ie(e,t,a[t]);return e},q=(e,a)=>Re(e,Te(a));var I=(e,a,t)=>new Promise((s,n)=>{var r=o=>{try{i(t.next(o))}catch(f){n(f)}},l=o=>{try{i(t.throw(o))}catch(f){n(f)}},i=o=>o.done?s(o.value):Promise.resolve(o.value).then(r,l);i((t=t.apply(e,a)).next())});var Ce=Object.defineProperty,Qe=(e,a,t)=>a in e?Ce(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,N=(e,a,t)=>(Qe(e,typeof a!="symbol"?a+"":a,t),t);function ue(e,a,t={}){return{name:e,from:a,meta:t}}function ge(e){return I(this,null,function*(){let a=[];if(typeof e.plugins<"u")for(let t=0;t<e.plugins.length;t++){let s=e.plugins[t];a.push(typeof s=="function"?yield s(e):s)}return a})}function fe(e,a){for(let t=0;t<e.length;t++)a(e[t])}function K(e,a,t){for(let s=0;s<e.length;s++){let n=a(t,e[s]);typeof n<"u"&&(t=n)}return t}function _(...e){return e[0]}function Ue(e,a=new Map){return(t,...s)=>{let n=a.get(t);return typeof n<"u"||a.set(t,n=e(t,...s)),n}}function Le(e,a,t=_,s=_){let n=[e[0]].slice(0,0),r=e.length,l=a.length,i=0,o=0;for(;i<r&&o<l;){let f=t(e[i]),c=t(a[o]);f<c?i++:f>c?o++:n.push(s(e[i++],a[o++]))}return n}function he(e,a,t=_,s=_){let n=[e[0]].slice(0,0),r=e.length,l=a.length,i=0,o=0;for(;i<r&&o<l;){let f=t(e[i]),c=t(a[o]);f<c?n.push(e[i++]):f>c?n.push(a[o++]):n.push(s(e[i++],a[o++]))}for(;i<r;)n.push(e[i++]);for(;o<l;)n.push(a[o++]);return n}function Oe(e,a){let t=[{value:e,depth:0}];for(let s=0,n=-1;s>=0;){let{value:r,depth:l}=t[s];if(n<=l&&r.type==="operator")for(let i=r.data.clauses.length;i>0;)t[++s]={value:r.data.clauses[--i],depth:l+1};else{let i=a(r,l);if(typeof i<"u")return i;--s}n=l}}function Ie(e,a){return I(this,null,function*(){let t=yield ge(a),{engines:s}=K(t,(r,l)=>{var i;return(i=l.onOperatorOptions)==null?void 0:i.call(l,r,e)},q(P({},a),{plugins:t})),n=yield Promise.all(s.map(r=>r(e)));return{type:"operator",search(r){let l=K(t,(o,f)=>{var c;return(c=f.onOperatorQuery)==null?void 0:c.call(f,o)},r.data),i=[];return Oe(q(P({},r),{data:l}),o=>{switch(o.type){case"operator":o.data.operator==="all"?i.push(ne(i.splice(-o.data.clauses.length),Le)):o.data.operator==="any"&&i.push(ne(i.splice(-o.data.clauses.length),he));break;default:let f=[];for(let c=0;c<n.length;c++)if(o.type===n[c].type){let h=n[c].search(o);h.data.documents.forEach(u=>{u.fields.forEach(p=>{p.id=p.id<<4|c})}),f.push(h.data.documents)}i.push(ne(f,he))}}),{type:"operator",data:K(t,(o,f)=>{var c;return(c=f.onOperatorQueryResult)==null?void 0:c.call(f,o)},{documents:i[0]})}}}})}function ne(e,a){return e.reduce((t,s)=>a(t,s.sort((n,r)=>n.id-r.id),n=>n.id,(n,r)=>{var l;return q(P({},n),{fields:[...n.fields,...(l=r==null?void 0:r.fields)!=null?l:[]]})}))}function se(e){return Math.max(1,Math.ceil(Math.log2(e)))}function Pe(e){if(e.d+e.f+e.x>32)throw new RangeError("Bit format exceeds 32 bits");return e}function Ye(e,a,t){let s=se(e),n=se(a),r=typeof t<"u"?se(t):32-s-n;return Pe({d:s,f:n,x:r})}var G=[0];for(let e=0;e<31;e++)G.push(G[e]|1<<e);function qe(e,a,t=0,s=e.length){let n=t;for(let r=0;n<s;n++)switch(r=e.charCodeAt(n),r){case 60:n>t&&a(t,t=n);continue;case 62:t=n+1}n>t&&a(t,n)}function De(e,a,t){for(let s=0;a<t;){switch(s=s<<8^32|e.charCodeAt(++a),s){case 97:case 98:case 99:case 101:case 104:case 105:case 108:case 109:case 112:case 115:case 116:case 119:case 24946:case 25185:case 25455:case 25965:case 26989:case 26990:case 27753:case 28005:case 28769:case 29551:case 29810:case 30562:case 6386277:case 6447475:case 6647138:case 6909552:case 7104878:case 7169396:case 7364978:case 7565173:case 7631457:case 1701667429:case 1768845429:case 1869967971:case 1885434465:case 1936684402:case 1953653091:continue;case 25202:case 26738:case 6516588:case 6909287:case 7823986:case 1634885997:case 1634887009:case 1650553701:case 1818848875:case 1835165028:case 1835365473:case 1852863860:case 1918985067:case 1970430821:switch(e.charCodeAt(++a)){case 9:case 10:case 32:case 47:case 62:return!0}}break}return!1}function ze(e,a,t=0,s=e.length){let n=0,r=t;for(let l=0;r<s;r++)switch(l=e.charCodeAt(r),l){case 60:r>t&&a(0,n,t,t=r);continue;case 62:e.charCodeAt(t+1)===47?a(2,--n,t,t=r+1):De(e,t,s)?a(3,n,t,t=r+1):a(1,n++,t,t=r+1)}r>t&&a(0,n,t,r)}function je(e,a,t){let s=0;qe(e,(n,r)=>a(e,(l,i)=>{t(e.slice(l,i),s++,l,i)},n,r))}function ye(e){let a=new RegExp(e,"gu");return(t,s,n=0,r=t.length)=>{var o;a.lastIndex=n;let l,i=0;do{l=a.exec(t);let f=(o=l==null?void 0:l.index)!=null?o:r;n<f&&s(n,Math.min(f,r)),l&&(i=l[0].length,n=l.index+i,i===0&&(a.lastIndex=l.index+1))}while(l&&n<r)}}function Fe(e){return new Uint8Array(e)}function J(){return[0].slice(0,0)}function Ne(e){return new Float64Array(e)}var le=class{constructor(e,a=J()){N(this,"data"),N(this,"cols"),N(this,"magnitude",0),N(this,"capacity"),this.data=e,this.cols=a,this.capacity=a.length}clear(){this.capacity=0}get(e){for(let a=0;a<this.capacity;a++)if(this.cols[a]===e)return this.data[a];return 0}add(e,a){this.cols[this.capacity]=e,this.data[this.capacity++]=a,this.magnitude=0}forEach(e){for(let a=0;a<this.capacity;a++)e(this.cols[a],this.data[a])}get length(){return this.magnitude||(this.magnitude=me(this))}},Ke=class{constructor(e=[]){N(this,"data"),N(this,"magnitude",0),N(this,"capacity"),this.data=e,this.capacity=e.length}clear(){this.capacity=0}get(e){for(let a=0;a<this.capacity;a++){let{start:t,end:s,value:n}=this.data[a];if(e>=t&&e<s)return n}return 0}add(e,a,t){this.data[this.capacity++]={start:e,end:a,value:t},this.magnitude=0}forEach(e){for(let a=0;a<this.capacity;a++){let{start:t,end:s,value:n}=this.data[a];for(let r=t;r<s;r++)e(r,n)}}get length(){return this.magnitude||(this.magnitude=me(this))}};function me(e){let a=0;return e.forEach((t,s)=>{a+=s*s}),Math.sqrt(a)}function He(e,a){return I(this,null,function*(){let t=yield ge(a),{separator:s,normalize:n,fields:r}=K(t,(c,h)=>{var u;return(u=h.onTextOptions)==null?void 0:u.call(h,c,e)},q(P({},a),{plugins:t})),l=Ye(e.length,r.length),i=new Map;for(let c=0;c<e.length;c++)for(let h=0;h<r.length;h++){let u=r[h].from(e[c]);if(typeof u=="object"&&(u=yield u),typeof u>"u")continue;let p=c<<l.f|h;fe(t,v=>{var m;return(m=v.onTextId)==null?void 0:m.call(v,p,l)});let d=Array.isArray(u)?u:[u];for(let v=0;v<d.length;v++)je(d[v],s,(m,g,y,Q)=>{let D=K(t,(x,T)=>{var A;return(A=T.onTextToken)==null?void 0:A.call(T,x,g,y,Q)},[m]);for(let x=0;x<D.length;x++){let T=n(m),A=i.get(T);typeof A>"u"?i.set(T,[p<<l.x|g]):A.push(p<<l.x|g)}})}let o={terms:[],index:new Map,space:l},f=[...i.keys()].sort();for(let c=0;c<f.length;c++)o.index.set(f[c],c),o.terms.push({value:f[c],occurrences:i.get(f[c])});return fe(t,c=>{var h;return(h=c.onTextStore)==null?void 0:h.call(c,o)}),{type:"text",search(c){let{field:h,value:u,abort:p=!1}=K(t,(m,g)=>{var y;return(y=g.onTextQuery)==null?void 0:y.call(g,m,o)},c.data),d=u;if(Array.isArray(d)){let m=new le(J());for(let g=0;g<u.length;g++){let y=n(d[g]),Q=o.index.get(y);typeof Q<"u"&&m.add(Q,1)}d=m}let v=new Map;if(p===!1){let m=-1;for(let y=0;y<r.length;y++)if(r[y].name===h){m=y;break}let g=new Map;d.forEach(y=>{let{occurrences:Q}=o.terms[y],D=Q.length;for(let x=0;x<D;x++){let T=Q[x],A=T>>>l.x,$=A&G[l.f];if(m!==-1&&m!==$)continue;let E=g.get(A);if(typeof E>"u"){g.set(A,E=new le(J()));let V={id:A,name:r[$].name,text:{value:E,score:0}},W=A>>>l.f,b=v.get(W);typeof b>"u"?v.set(W,{id:W,fields:[V]}):b.fields.push(V)}let z=T&G[l.x];E.add(z,y)}})}return{type:"text",data:K(t,(m,g)=>{var y;return(y=g.onTextQueryResult)==null?void 0:y.call(g,m,o)},{query:d,documents:[...v.values()]})}}}})}function Ve(e){let{terms:a,space:t}=e,s=new Map,n=Ne(1<<t.f),r=0;for(let l=0,i=0;l<a.length;l++){let{occurrences:o}=a[l],f=o.length;for(let c=0,h=c;c<f;c=h){for(i=o[c]>>>e.space.x;h<f&&o[++h]>>>t.x===i;);let u=s.get(i);typeof u>"u"&&s.set(i,u=new le(J()));let p=i&G[t.f];u.add(l,h-c),n[p]+=h-c}i>r&&(r=i)}r>>>=e.space.f,r+=1;for(let l=0;l<n.length;l++)n[l]/=r;return{frequencies:s,lengths:n,documents:r}}function We(e){return e.normalize("NFKD").toLowerCase()}function Be(e,a){let t=Math.min(e.length,a.length);for(let s=0;s<t;s++)if(e.charCodeAt(s)!==a.charCodeAt(s))return s;return t}function Ge(e,a,t=0,s=e.length){for(let n=0;t<s;t+=1+ +(n>65535)){let r=a(n=e.codePointAt(t),t);if(typeof r<"u")return r}}function xe(e,a,t=0,s=e.length){let n=[];return Ge(e,r=>{n.push(r);let l=a(String.fromCodePoint(...n),n.length);if(typeof l<"u")return l},t,s)}function Je(e){let a=new Map,t=J();for(let s=0,n="";s<e.terms.length;s++){let r=e.terms[s];xe(r.value,(l,i)=>(a.has(l)||a.set(l,s),i===2)),t[t.length]=Be(n,n=r.value)}return{index:a,cover:t}}function Xe(e,{terms:a,index:t},s,n){let r=new Ke,l=new Set;for(let i=0;i<s.length;i++){let o=s[i];if(typeof o=="string"){let u=t.get(o);typeof u<"u"&&r.add(u,u+1,1);continue}if(o=n(o.data),l.has(o))continue;l.add(o);let f="",c=-1,h=-1;if(xe(o,u=>{let p=e.index.get(u);if(typeof p<"u")f=u,c=p;else return!0}),c!==-1)for(let u=f.length;u<o.length;){let{value:p}=a[c];if(u===p.length){++c;continue}if(p.charCodeAt(u)===o.charCodeAt(u))u++;else if(a.length===++c||e.cover[c]<u){c=-1;break}}if(c!==-1){for(h=c+1;h<a.length&&!(e.cover[h]<o.length);h++);r.add(c,h,1)}}return r}function Ze(){let e,a;return{get data(){return e},onTextOptions({normalize:t}){a=t},onTextStore(t){e=Je(t)},onTextQuery(t,s){return Array.isArray(t.value)?q(P({},t),{value:Xe(e,s,t.value,a)}):t}}}function pe(e,a,t,s=new Set){if(!s.size)return e;let n=ye(a),r=[],l=[],i=0;ze(e,(c,h,u,p)=>{switch(c){case 1:h===0&&r.push([u,-1]);break;case 2:h===0&&(r[r.length-1][1]=p);break;case 0:n(e,(d,v)=>{s.has(i++)&&l.push([d,v])},u,p)}}),r.length||r.push([0,e.length]);let o=[];l.reverse(),r[0][0]!==0&&r.unshift([0,r[0][0]]),r[r.length-1][1]!==e.length&&r.push([r[r.length-1][1],e.length]);let f=t?r.length:2;for(let[c,h]of r){let u=e.slice(c,h);for(let[p,d]of l)p>=c&&d<=h&&(p-=c,d-=c,u=[u.slice(0,p),"<mark>",u.slice(p,d),"</mark>",u.slice(d)].join(""));if(o.push(u)===f)break}return o.join("")}function _e(e){var f;let{b:a=.75,k:t=1.2}=(f=e==null?void 0:e.parameters)!=null?f:{},{weight:s}=e!=null?e:{},n=new Map,r=[],l=new Map,i=[],o=[];return{onTextOptions({fields:c},h){var u;for(let p of c)r.push((u=p.meta.weight)!=null?u:1);if(typeof s<"u")for(let p=0;p<h.length;p++){let d=s(h[p]);typeof d<"u"&&n.set(p,d)}},onTextStore(c){let{frequencies:h,lengths:u,documents:p}=Ve(c);o=[...u],i=c.terms.map(d=>et(d,p,c)),h.forEach((d,v)=>{let m=0;d.forEach((g,y)=>{m+=y}),l.set(v,m)})},onTextQueryResult(c){let{query:h,documents:u}=c,p=1,d=1,v=0,m=0,g=0,y=0,Q=0,D=0,x=performance.now();h.forEach(E=>{D+=i[E]}),v+=performance.now()-x;let T=10;for(let E=0;E<u.length;E++){u[E].score=0;for(let z=0;z<u[E].fields.length;z++){let V=function(){x=performance.now();let k=b.text.value.cols,U=b.text.value.data,X=h.data,Y=[0];for(let S=1,M=0;S<U.length;S++)U[S-1]!==U[S]&&Y.push(S),(U[S]>=X[M].end||U[S]<X[M].start)&&M++,ee[S]=M;let j=[...Y].reverse();Y.push(U.length),Y.reverse();let F=[],w=[];g+=performance.now()-x,x=performance.now();let R=new Set;for(let S=-1,M=j.length-1;M>=0;){let L=j[M],B=M;for(let O=M-1;O>=0;O--){let re=j[O];re!==Y[O]&&k[L]>k[re]&&(L=re,B=O)}if(S!==-1&&k[L]-k[S]>T&&(F.push([...w]),w.length=0,R.clear()),R.has(ee[L])){let O;k[S]-w[w.length-2]>k[L]-k[S]&&(O=w.pop()),F.push([...w]),w.length=0,R.clear(),O&&(w.push(O),R.add(O))}for(w.push(k[L]),R.add(ee[L]),S=L,j[B]++;j[M]===Y[M]&&M--;);}F.push(w),y+=performance.now()-x,x=performance.now();let C=0;for(let S=0;S<F.length;S++){let M=F[S];if(!M.length)continue;let L=de(M),B=M.length;C+=H(B/L,p)*H(B,d)}let te=l.get(b.id),ae=t*(1-a+a*(te/o[z])),Ee=D*((t+1)*C)/(ae+C);Q+=performance.now()-x,u[E].score+=b.text.score=Ee},W=function(){x=performance.now();let k=new Map;b.text.value.forEach((w,R)=>{for(let C=0;C<h.data.length;C++){let{start:te,end:ae}=h.data[C];te<=R&&R<ae&&k.set(w,C)}});let U=0,X=$e([...k].sort((w,R)=>w[0]-R[0]));for(let w of X){if(!w.length)continue;let R=de(w),C=w.length;U+=H(C/R,p)*H(C,d)}let Y=l.get(b.id),j=t*(1-a+a*(Y/o[z])),F=D*((t+1)*U)/(j+U);Q+=performance.now()-x,u[E].score+=b.text.score=F};var A=V,$=W;let b=u[E].fields[z],ee=Fe(b.text.value.cols.length);V()}}return c}}}function $e(e,a=10){let t=[],s=[0];e:for(let n=0;n<e.length-1;n++){let[r,l]=e[n],[i,o]=e[n+1];if(i-r>a||l===o)t.push(s),s=[n+1];else{for(let f=0;f<s.length;f++){let[c,h]=e[f];if(h===o){let u=i-r,p=r-c;u>p?(t.push(s),s=[n+1]):(s.push(n+1),t.push(s),s=[]);continue e}}s.push(n+1)}}return s.length&&t.push(s),t.map(n=>n.map(r=>e[r][0]))}function de(e,a=10){return e.length===1?a:1+e[e.length-1]-e[0]}function et(e,a,t){let{occurrences:s}=e,{space:n}=t,r=0,l=s.length;for(let o=0,f=o;o<l;o=f){let c=s[o]>>>n.x;for(;f<l&&s[++f]>>>n.x===c;);r++}let i=(a-r+.5)/(r+.5);return Math.log(1+Math.abs(i))}var we,Se,ce,Z;function tt(e){let a=new Map;for(let t of e){let[s]=t.location.split("#"),n=a.get(s);typeof n>"u"?a.set(s,t):(a.set(t.location,t),t.parent=n)}return a}function ve(e,a){return I(this,null,function*(){ce=a,Z=new RegExp(e.separator),we=yield Ie(a,{engines:[()=>I(this,null,function*(){return He(a,{separator:ye(new RegExp(e.separator)),normalize:Ue(We),fields:[ue("title",t=>t.title),ue("text",t=>t.text)],plugins:[_e({weight:t=>t.boost}),Ze()]})})]}),Se=tt(a)})}function Me(e){return I(this,null,function*(){let a=e.split(Z);a.length>1&&a[a.length-1]===""&&a.pop();let t=we.search({type:"operator",data:{operator:"all",clauses:a.map(r=>({type:"text",data:{field:"*",value:[{type:"prefix",data:r}]}}))}}),s=new Map,n=t.data.documents.map(r=>{let l=P({},ce[r.id]),i=+!l.parent;return l.title=pe(l.title,Z,!0,r.fields.reduce((o,{name:f,text:c})=>{if(f==="title"){let h=new Set(c.value.cols);for(let u of h)o.add(u)}return o},new Set)),l.text=pe(l.text,Z,!1,r.fields.reduce((o,{name:f,text:c})=>{if(f==="text"){let h=new Set(c.value.cols);for(let u of h)o.add(u)}return o},new Set)),q(P({id:r.id},l),{score:r.score*(1+H(i,2)),terms:{}})});n.sort((r,l)=>l.score-r.score);for(let r of n){let l=ce[r.id];if(typeof l<"u"){let i=l.parent?l.parent.location:l.location;s.set(i,[...s.get(i)||[],r])}}for(let[r,l]of s)if(!l.find(i=>i.location===r)){let i=Se.get(r);l.push(q(P({},i),{score:0,terms:{}}))}return{items:[...s.values()]}})}/*!
 * Search preview, do not use in production - see https://t.ly/ovHX7
 * ----------------------------------------------------------------------------
 * Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 */function at(e){return I(this,null,function*(){switch(e.type){case 0:return yield ve(e.data.config,e.data.docs),{type:1};case 2:let a=e.data;try{return{type:3,data:yield Me(a)}}catch(t){return console.warn(t),{type:3,data:{items:[]}}}default:throw new TypeError("Invalid message type")}})}addEventListener("message",e=>I(void 0,null,function*(){postMessage(yield at(e.data))}));})();
//# sourceMappingURL=search.c7dda4d7.min.js.map

